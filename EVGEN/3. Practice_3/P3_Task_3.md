# Задание 3

Выделен сетевой сегмент класса C – 192.168.4.0 /24. Используйте VSLM для назначения IP-адресов четырем подсетям. К маршрутизатору A подключены сети, состоящие из 30 и 15 хостов, а к маршрутизатору B подлючены сети из 10 и 5 хостов.

## Решение

### **Анализ требований**

Исходная сеть: **192.168.4.0 /24**:

- Маска: 255.255.255.0;

- Диапазон адресов: 192.168.4.0 - 192.168.4.255;

- Доступно для подсетей: 254 адреса;

Требуется создать 4 подсети:

- **Подсеть A1:** 30 хостов;

- **Подсеть A2:** 15 хостов;

- **Подсеть B1:** 10 хостов;

- **Подсеть B2:** 5 хостов;

### **Расчет необходимого размера подсетей**

Формула для расчётов та же: **2^n - 2 >= количество_хостов**

- **Для 30 хостов:** 2^n - 2 >= 30 → 2^n >= 32 → n = 5 (32 адреса). 
  
  **Маска: /27** (255.255.255.224);

- **Для 15 хостов:** 2^n - 2 >= 15 → 2^n >= 17 → n = 5 (32 адреса). 
  
  **Маска: /27** (255.255.255.224);

- **Для 10 хостов:** 2^n - 2 >= 10 → 2^n >= 12 → n = 4 (16 адресов). 
  
  **Маска: /28** (255.255.255.240);

- **Для 5 хостов:** 2^n - 2 >= 5 → 2^n >= 7 → n = 3 (8 адресов). 
  
  **Маска: /29** (255.255.255.248);

Далее выделяем подсети в порядке убывания размера: A1 (30) -> A2 (15) -> B1 (10) -> B2 (5).

### **Процесс разбиения (VLSM)**

**Исходная сеть:** 192.168.4.0/24

1. Выбираем первую подсеть для A1. **Сеть A1:** 192.168.4.0/27. Её доступные адреса 192.168.4.1 - 192.168.4.30. 192.168.4.31 - **Broadcast**. Следующая свободная сеть для разбиения будет: **192.168.4.32/27**.

2. Выделяем подсеть для 15 хостов (A2, /27). Для 15 хостов хватит и /28, но по расчету мы взяли /27. Выделяем следующую подсеть того же размера. Поэтому **сеть A2:** 192.168.4.32/27. Её доступные адреса 192.168.4.33 - 192.168.4.62. 192.168.4.63 - **Broadcast**. Следующая свободная сеть для разбиения: **192.168.4.64/27**

3. Делим сеть 192.168.4.64/27 на более мелкие. Эту сеть (/27) можно разделить на:
   
   - 2 подсети /28 (по 16 адресов) -> 192.168.4.64/28 и 192.168.4.80/28;
   
   - Или 4 подсети /29 (по 8 адресов) и так далее;
   
   Разделим ее на 2 подсети /28.
   
   - Подсеть 0: **192.168.4.64/28** (адреса .65 - .78);
   
   - Подсеть 1: **192.168.4.80/28** (адреса .81 - .94);
   
   Тогда выделяем первую подсеть /28 для 10 хостов для сети **B1**. **Сеть B1:** 192.168.4.64/28, а её доступные адреса 192.168.4.65 - 192.168.4.78. 192.168.4.79 - **Broadcast**. 
   
   Теперь нам нужна очень маленькая подсеть для 5 хостов (/29). Мы можем взять следующую подсеть /28 (192.168.4.80/28) и разделить ее на две еще меньшие подсети /29 (по 8 адресов).

4. Делим сеть 192.168.4.80/28 на подсети /29:
   
   - Подсеть 0: **192.168.4.80/29** (адреса .81 - .86);
   
   - Подсеть 1: 192.168.4.88/29 (адреса .89 - .94);
   
   Выделяем первую подсеть /29 для 5 хостов для сети **B2**. **Сеть B2:** 192.168.4.80/29. Её доступные адреса: 192.168.4.81 - 192.168.4.86. 192.168.4.87 - **Broadcast**.

При этом остаток адресного пространства (192.168.4.88/29, 192.168.4.96/27 ...) остается свободным.

### **Итоговая таблица назначения IP-адресов**

| Подсеть | Количество хостов | Сетевой адрес | Маска (/CIDR) | Маска (десятичная) | Диапазон доступных адресов | Broadcast адрес |
| ------- | ----------------- | ------------- |:-------------:| ------------------ | -------------------------- | --------------- |
| **A1**  | 30                | 192.168.4.0   | /27           | 255.255.255.224    | 192.168.4.1- 192.168.4.30  | 192.168.4.31    |
| **А2**  | 15                | 192.168.4.32  | /27           | 255.255.255.224    | 192.168.4.33- 192.168.4.62 | 192.168.4.63    |
| **B1**  | 10                | 192.168.4.64  | /28           | 255.255.255.240    | 192.168.4.65- 192.168.4.78 | 192.168.4.79    |
| **B2**  | 5                 | 192.168.4.80  | /29           | 255.255.255.248    | 192.168.4.81- 192.168.4.86 | 192.168.4.87    |

### **Визуализация сети**

```bash
                    Маршрутизатор A
                         |
        ------------------------------------
        |                                  |
 Подсеть A1 (192.168.4.0/27)    Подсеть A2 (192.168.4.32/27)
    30 хостов                     15 хостов


                    Маршрутизатор B
                         |
        ------------------------------------
        |                                  |
 Подсеть B1 (192.168.4.64/28)   Подсеть B2 (192.168.4.80/29)
    10 хостов                      5 хостов
```

В этой схеме для связи между маршрутизаторами A и B (например, по последовательному каналу) потребуется выделить отдельную малую подсеть, например, `/30` из свободного диапазона (скажем, `192.168.4.88/30`).
